{"level":"warn","time":"2026-02-01T20:38:26.996Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978096034-ap2n84","code":1001,"originalReason":"empty","closeSource":"UNKNOWN","event":"ws_close_reason_missing","msg":"[WS] Close(1001) with empty/none reason - logging as SERVER_CLOSE"}
{"level":"info","time":"2026-02-01T20:38:26.997Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978096034-ap2n84","code":1001,"reason":"SERVER_CLOSE","closeSource":"UNKNOWN","wasClean":true,"event":"websocket_disconnected","msg":"WebSocket disconnected: UNKNOWN"}
{"level":"info","time":"2026-02-01T20:38:27.459Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","traceId":"1299f76c-7a7e-4589-be0e-4da1b7e50b02","sessionId":"sess_0a6a9323-dfaa-4864-836a-fbffe02d7ec4","hasUserId":false,"ticketHash":"b08306e658d0","ttl":60,"msg":"[WSTicket] Ticket generated"}
{"level":"info","time":"2026-02-01T20:38:27.508Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978307508-mh6t69","ip":"::1","originHost":"localhost","sessionHash":"2c3b20d765e7","hasUserId":false,"event":"ws_conn_ctx_set","msg":"WebSocket connection context established"}
{"level":"info","time":"2026-02-01T20:38:30.833Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","requestId":"req-1769978310819-45q98psz3","sessionId":"sess_0a6a9323-dfaa-4864-836a-fbffe02d7ec4","query":"Рестораны рядом с Big Ben","status":"PENDING","hasOwner":true,"hasIdempotencyKey":true,"msg":"[RedisJobStore] Job created"}
{"level":"info","time":"2026-02-01T20:38:30.836Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","requestId":"req-1769978310819-45q98psz3","sessionHash":"2c3b20d765e7","hasUserId":false,"operation":"createJob","decision":"ACCEPTED","hasIdempotencyKey":true,"event":"job_created","msg":"[Observability] Job created with JWT session binding and idempotency key"}
{"level":"info","time":"2026-02-01T20:38:30.848Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","requestId":"req-1769978310819-45q98psz3","status":"RUNNING","progress":10,"msg":"[RedisJobStore] Status updated"}
{"level":"info","time":"2026-02-01T20:38:30.849Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","requestId":"req-1769978310819-45q98psz3","status":"RUNNING","progress":10,"event":"status_running","msg":"[Observability] Job status set to RUNNING"}
{"level":"info","time":"2026-02-01T20:38:30.850Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","channel":"search","requestId":"req-1769978310819-45q98psz3","event":"backlog_created","msg":"WebSocket backlog created for late subscribers"}
{"level":"info","time":"2026-02-01T20:38:30.854Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","requestId":"req-1769978310819-45q98psz3","pipelineVersion":"route2","event":"pipeline_selected","queryLen":25,"queryHash":"91e8d5d3c4c4","msg":"[ROUTE2] Pipeline selected"}
{"level":"info","time":"2026-02-01T20:38:30.855Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","requestId":"req-1769978310819-45q98psz3","pipelineVersion":"route2","event":"device_region_resolved","userRegionCode":"IL","userRegionSource":"config","msg":"[ROUTE2] Device region resolved"}
{"level":"info","time":"2026-02-01T20:38:30.857Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","requestId":"req-1769978310819-45q98psz3","traceId":"89d719c1-b5ec-473d-8b82-8752ccf4f88d","sessionId":"sess_0a6a9323-dfaa-4864-836a-fbffe02d7ec4","pipelineVersion":"route2","stage":"gate2","event":"stage_started","queryLen":25,"queryHash":"91e8d5d3c4c4","msg":"[ROUTE2] gate2 started"}
{"level":"info","time":"2026-02-01T20:38:31.283Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978307508-mh6t69","event":"ws_assistant_raw_received","rawMessage":{"v":1,"type":"subscribe","channel":"search","requestId":"req-1769978310819-45q98psz3","sessionId":"session-1769963999392-ryarol1sk"},"rawMessage.type":"subscribe","msg":"[WS] Raw message received (pre-normalization)"}
{"level":"info","time":"2026-02-01T20:38:31.286Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978307508-mh6t69","event":"ws_assistant_raw_received","rawMessage":{"v":1,"type":"subscribe","channel":"assistant","requestId":"req-1769978310819-45q98psz3","sessionId":"session-1769963999392-ryarol1sk"},"rawMessage.type":"subscribe","msg":"[WS] Raw message received (pre-normalization)"}
{"level":"info","time":"2026-02-01T20:38:31.294Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978307508-mh6t69","channel":"search","requestIdHash":"84f9f5d679a4","sessionHash":"2c3b20d765e7","event":"ws_subscribe_attempt","msg":"WebSocket subscribe attempt"}
{"level":"info","time":"2026-02-01T20:38:31.294Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978307508-mh6t69","channel":"search","requestIdHash":"84f9f5d679a4","sessionHash":"2c3b20d765e7","pending":false,"subscriberCount":1,"event":"ws_subscribe_ack","msg":"Subscribe accepted - registration complete"}
{"level":"info","time":"2026-02-01T20:38:31.295Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978307508-mh6t69","channel":"assistant","requestIdHash":"84f9f5d679a4","sessionHash":"2c3b20d765e7","event":"ws_subscribe_attempt","msg":"WebSocket subscribe attempt"}
{"level":"info","time":"2026-02-01T20:38:31.296Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978307508-mh6t69","channel":"assistant","requestIdHash":"84f9f5d679a4","sessionHash":"2c3b20d765e7","pending":false,"subscriberCount":1,"event":"ws_subscribe_ack","msg":"Subscribe accepted - registration complete"}
{"level":"info","time":"2026-02-01T20:38:31.297Z","pid":19808,"hostname":"il-dev-win-lt-shahar-pot","channel":"search","requestId":"req-1769978310819-45q98psz3","count":1,"event":"backlog_drained","msg":"WebSocket backlog drained to late subscriber"}
{"level":"warn","time":"2026-02-01T20:38:45.579Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","rateLimitStore":"memory","msg":"[RateLimit] Using in-memory rate limiting (not distributed, dev only)"}
{"level":"info","time":"2026-02-01T20:38:46.736Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","ttlSeconds":300,"cleanupIntervalMs":60000,"msg":"InMemoryRequestStore initialized"}
{"level":"info","time":"2026-02-01T20:38:46.767Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","googleApiKey":{"exists":true,"len":39,"last4":"fpMo"},"searchProvider":"google","msg":"[BOOT] API key status"}
{"level":"info","time":"2026-02-01T20:38:46.769Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Config] ASSISTANT_MODE = ENABLED (always on, LLM-first)"}
{"level":"info","time":"2026-02-01T20:38:46.774Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_connect_start","redisUrl":"localhost:6379","env":"config_local","failClosed":false,"connectTimeout":2000,"startupTimeout":8000,"msg":"[RedisService] Starting Redis connection"}
{"level":"info","time":"2026-02-01T20:38:46.874Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_ready","msg":"[RedisService] Redis client ready"}
{"level":"info","time":"2026-02-01T20:38:46.878Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_connect_ok","redisUrl":"localhost:6379","durationMs":102,"msg":"[RedisService] ✓ Redis connected successfully"}
{"level":"warn","time":"2026-02-01T20:38:45.618Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","rateLimitStore":"memory","msg":"[RateLimit] Using in-memory rate limiting (not distributed, dev only)"}
{"level":"info","time":"2026-02-01T20:38:46.766Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","ttlSeconds":300,"cleanupIntervalMs":60000,"msg":"InMemoryRequestStore initialized"}
{"level":"info","time":"2026-02-01T20:38:46.881Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_STARTUP","cacheEnabled":true,"hasRedis":true,"reason":"redis_available","msg":"[GoogleMapsCache] ✓ Cache ENABLED with shared Redis client"}
{"level":"info","time":"2026-02-01T20:38:46.898Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","env":"development","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","credentialsEnabled":true,"msg":"CORS: Initialized"}
{"level":"info","time":"2026-02-01T20:38:46.910Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","env":"config_local","redisEnabled":true,"hasStateStore":true,"msg":"WebSocketManager: Configuration resolved"}
{"level":"info","time":"2026-02-01T20:38:46.912Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","redisUrl":"local","msg":"WebSocketManager: Using shared Redis client"}
{"level":"info","time":"2026-02-01T20:38:46.915Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","msg":"WebSocketManager: Initialized"}
{"level":"info","time":"2026-02-01T20:38:46.917Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","event":"load_more_handler_registered","msg":"[LOAD_MORE_REGISTRY] Handler registered"}
{"level":"info","time":"2026-02-01T20:38:46.918Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","msg":"[BOOT] Load more handler registered"}
{"level":"info","time":"2026-02-01T20:38:46.920Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","msg":"Server listening on http://localhost:3000"}
{"level":"info","time":"2026-02-01T20:38:46.768Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","googleApiKey":{"exists":true,"len":39,"last4":"fpMo"},"searchProvider":"google","msg":"[BOOT] API key status"}
{"level":"info","time":"2026-02-01T20:38:46.770Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Config] ASSISTANT_MODE = ENABLED (always on, LLM-first)"}
{"level":"info","time":"2026-02-01T20:38:46.774Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_connect_start","redisUrl":"localhost:6379","env":"config_local","failClosed":false,"connectTimeout":2000,"startupTimeout":8000,"msg":"[RedisService] Starting Redis connection"}
{"level":"info","time":"2026-02-01T20:38:46.980Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_ready","msg":"[RedisService] Redis client ready"}
{"level":"info","time":"2026-02-01T20:38:46.986Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_connect_ok","redisUrl":"localhost:6379","durationMs":209,"msg":"[RedisService] ✓ Redis connected successfully"}
{"level":"info","time":"2026-02-01T20:38:46.989Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_STARTUP","cacheEnabled":true,"hasRedis":true,"reason":"redis_available","msg":"[GoogleMapsCache] ✓ Cache ENABLED with shared Redis client"}
{"level":"info","time":"2026-02-01T20:38:47.006Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","env":"development","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","credentialsEnabled":true,"msg":"CORS: Initialized"}
{"level":"info","time":"2026-02-01T20:38:47.016Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","env":"config_local","redisEnabled":true,"hasStateStore":true,"msg":"WebSocketManager: Configuration resolved"}
{"level":"info","time":"2026-02-01T20:38:47.018Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","redisUrl":"local","msg":"WebSocketManager: Using shared Redis client"}
{"level":"info","time":"2026-02-01T20:38:47.021Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","msg":"WebSocketManager: Initialized"}
{"level":"info","time":"2026-02-01T20:38:47.023Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","event":"load_more_handler_registered","msg":"[LOAD_MORE_REGISTRY] Handler registered"}
{"level":"info","time":"2026-02-01T20:38:47.024Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","msg":"[BOOT] Load more handler registered"}
{"level":"info","time":"2026-02-01T20:38:47.026Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","msg":"Server listening on http://localhost:3000"}
{"level":"fatal","time":"2026-02-01T20:38:47.078Z","pid":3376,"hostname":"il-dev-win-lt-shahar-pot","error":"listen EADDRINUSE: address already in use :::3000","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at __node_internal_captureLargerStackTrace (node:internal/errors:496:5)\n    at __node_internal_uvExceptionWithHostPort (node:internal/errors:593:12)\n    at Server.setupListenHandle [as _listen2] (node:net:1817:16)\n    at listenInCluster (node:net:1865:12)\n    at Server.listen (node:net:1953:7)\n    at Function.listen (C:\\dev\\piza\\angular-piza\\server\\node_modules\\express\\lib\\application.js:605:24)\n    at <anonymous> (c:\\dev\\piza\\angular-piza\\server\\src\\server.ts:130:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","msg":"[FATAL] Uncaught Exception - server may be in unstable state"}
{"level":"info","time":"2026-02-01T20:38:47.186Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","traceId":"960105c6-bd79-4513-a431-e6d25eb856af","sessionId":"sess_0a6a9323-dfaa-4864-836a-fbffe02d7ec4","hasUserId":false,"ticketHash":"e4e9cd8c6f11","ttl":60,"msg":"[WSTicket] Ticket generated"}
{"level":"info","time":"2026-02-01T20:38:47.201Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","traceId":"ffd097a2-94e2-4e6e-b4a0-6c0cc01be250","sessionId":"sess_0a6a9323-dfaa-4864-836a-fbffe02d7ec4","hasUserId":false,"ticketHash":"7df32eb992ed","ttl":60,"msg":"[WSTicket] Ticket generated"}
{"level":"info","time":"2026-02-01T20:38:47.226Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327226-1h4vut","ip":"::1","originHost":"localhost","sessionHash":"2c3b20d765e7","hasUserId":false,"event":"ws_conn_ctx_set","msg":"WebSocket connection context established"}
{"level":"info","time":"2026-02-01T20:38:47.232Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327226-1h4vut","event":"ws_assistant_raw_received","rawMessage":{"v":1,"type":"subscribe","channel":"search","requestId":"req-1769975452679-awh297hcs"},"rawMessage.type":"subscribe","msg":"[WS] Raw message received (pre-normalization)"}
{"level":"info","time":"2026-02-01T20:38:47.238Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","msg":"[JobStore] Creating singleton initialization promise"}
{"level":"info","time":"2026-02-01T20:38:47.241Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","store":"redis","redisUrl":"redis://localhost:6379","ttlSeconds":86400,"enableRedisJobStore":true,"msg":"[JobStore] Initializing Redis store"}
{"level":"info","time":"2026-02-01T20:38:47.242Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","ttlSeconds":86400,"msg":"[RedisJobStore] Initialized with shared Redis client"}
{"level":"info","time":"2026-02-01T20:38:47.243Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","store":"redis","msg":"[JobStore] ✓ Redis store initialized with shared client"}
{"level":"info","time":"2026-02-01T20:38:47.243Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327226-1h4vut","event":"ws_assistant_raw_received","rawMessage":{"v":1,"type":"subscribe","channel":"assistant","requestId":"req-1769975452679-awh297hcs"},"rawMessage.type":"subscribe","msg":"[WS] Raw message received (pre-normalization)"}
{"level":"info","time":"2026-02-01T20:38:47.254Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327226-1h4vut","channel":"search","requestIdHash":"e492f7aaa516","sessionHash":"2c3b20d765e7","event":"ws_subscribe_attempt","msg":"WebSocket subscribe attempt"}
{"level":"info","time":"2026-02-01T20:38:47.256Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327226-1h4vut","channel":"search","requestIdHash":"e492f7aaa516","sessionHash":"2c3b20d765e7","pending":false,"subscriberCount":1,"event":"ws_subscribe_ack","msg":"Subscribe accepted - registration complete"}
{"level":"info","time":"2026-02-01T20:38:47.264Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327226-1h4vut","channel":"assistant","requestIdHash":"e492f7aaa516","sessionHash":"2c3b20d765e7","event":"ws_subscribe_attempt","msg":"WebSocket subscribe attempt"}
{"level":"info","time":"2026-02-01T20:38:47.265Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327226-1h4vut","channel":"assistant","requestIdHash":"e492f7aaa516","sessionHash":"2c3b20d765e7","pending":false,"subscriberCount":1,"event":"ws_subscribe_ack","msg":"Subscribe accepted - registration complete"}
{"level":"info","time":"2026-02-01T20:38:47.272Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327271-a4kjs6","ip":"::1","originHost":"localhost","sessionHash":"2c3b20d765e7","hasUserId":false,"event":"ws_conn_ctx_set","msg":"WebSocket connection context established"}
{"level":"info","time":"2026-02-01T20:38:47.312Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327271-a4kjs6","event":"ws_assistant_raw_received","rawMessage":{"v":1,"type":"subscribe","channel":"search","requestId":"req-1769978310819-45q98psz3"},"rawMessage.type":"subscribe","msg":"[WS] Raw message received (pre-normalization)"}
{"level":"info","time":"2026-02-01T20:38:47.314Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327271-a4kjs6","event":"ws_assistant_raw_received","rawMessage":{"v":1,"type":"subscribe","channel":"assistant","requestId":"req-1769978310819-45q98psz3"},"rawMessage.type":"subscribe","msg":"[WS] Raw message received (pre-normalization)"}
{"level":"info","time":"2026-02-01T20:38:47.323Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327271-a4kjs6","channel":"search","requestIdHash":"84f9f5d679a4","sessionHash":"2c3b20d765e7","event":"ws_subscribe_attempt","msg":"WebSocket subscribe attempt"}
{"level":"info","time":"2026-02-01T20:38:47.326Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327271-a4kjs6","channel":"search","requestIdHash":"84f9f5d679a4","sessionHash":"2c3b20d765e7","pending":false,"subscriberCount":1,"event":"ws_subscribe_ack","msg":"Subscribe accepted - registration complete"}
{"level":"info","time":"2026-02-01T20:38:47.326Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327271-a4kjs6","channel":"assistant","requestIdHash":"84f9f5d679a4","sessionHash":"2c3b20d765e7","event":"ws_subscribe_attempt","msg":"WebSocket subscribe attempt"}
{"level":"info","time":"2026-02-01T20:38:47.328Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327271-a4kjs6","channel":"assistant","requestIdHash":"84f9f5d679a4","sessionHash":"2c3b20d765e7","pending":false,"subscriberCount":1,"event":"ws_subscribe_ack","msg":"Subscribe accepted - registration complete"}
{"level":"warn","time":"2026-02-01T20:38:47.099Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","rateLimitStore":"memory","msg":"[RateLimit] Using in-memory rate limiting (not distributed, dev only)"}
{"level":"info","time":"2026-02-01T20:38:48.102Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","ttlSeconds":300,"cleanupIntervalMs":60000,"msg":"InMemoryRequestStore initialized"}
{"level":"info","time":"2026-02-01T20:38:48.107Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","googleApiKey":{"exists":true,"len":39,"last4":"fpMo"},"searchProvider":"google","msg":"[BOOT] API key status"}
{"level":"info","time":"2026-02-01T20:38:48.112Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Config] ASSISTANT_MODE = ENABLED (always on, LLM-first)"}
{"level":"info","time":"2026-02-01T20:38:48.120Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_connect_start","redisUrl":"localhost:6379","env":"config_local","failClosed":false,"connectTimeout":2000,"startupTimeout":8000,"msg":"[RedisService] Starting Redis connection"}
{"level":"info","time":"2026-02-01T20:38:48.204Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_ready","msg":"[RedisService] Redis client ready"}
{"level":"info","time":"2026-02-01T20:38:48.210Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_connect_ok","redisUrl":"localhost:6379","durationMs":87,"msg":"[RedisService] ✓ Redis connected successfully"}
{"level":"info","time":"2026-02-01T20:38:48.213Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_STARTUP","cacheEnabled":true,"hasRedis":true,"reason":"redis_available","msg":"[GoogleMapsCache] ✓ Cache ENABLED with shared Redis client"}
{"level":"info","time":"2026-02-01T20:38:48.245Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","env":"development","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","credentialsEnabled":true,"msg":"CORS: Initialized"}
{"level":"info","time":"2026-02-01T20:38:48.259Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","env":"config_local","redisEnabled":true,"hasStateStore":true,"msg":"WebSocketManager: Configuration resolved"}
{"level":"info","time":"2026-02-01T20:38:48.260Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","redisUrl":"local","msg":"WebSocketManager: Using shared Redis client"}
{"level":"info","time":"2026-02-01T20:38:48.264Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","msg":"WebSocketManager: Initialized"}
{"level":"info","time":"2026-02-01T20:38:48.266Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","event":"load_more_handler_registered","msg":"[LOAD_MORE_REGISTRY] Handler registered"}
{"level":"info","time":"2026-02-01T20:38:48.268Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","msg":"[BOOT] Load more handler registered"}
{"level":"info","time":"2026-02-01T20:38:48.270Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","msg":"Server listening on http://localhost:3000"}
{"level":"fatal","time":"2026-02-01T20:38:48.280Z","pid":17896,"hostname":"il-dev-win-lt-shahar-pot","error":"listen EADDRINUSE: address already in use :::3000","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at __node_internal_captureLargerStackTrace (node:internal/errors:496:5)\n    at __node_internal_uvExceptionWithHostPort (node:internal/errors:593:12)\n    at Server.setupListenHandle [as _listen2] (node:net:1817:16)\n    at listenInCluster (node:net:1865:12)\n    at Server.listen (node:net:1953:7)\n    at Function.listen (C:\\dev\\piza\\angular-piza\\server\\node_modules\\express\\lib\\application.js:605:24)\n    at <anonymous> (c:\\dev\\piza\\angular-piza\\server\\src\\server.ts:130:20)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","msg":"[FATAL] Uncaught Exception - server may be in unstable state"}
{"level":"warn","time":"2026-02-01T20:38:51.018Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327226-1h4vut","code":1001,"originalReason":"empty","closeSource":"UNKNOWN","event":"ws_close_reason_missing","msg":"[WS] Close(1001) with empty/none reason - logging as SERVER_CLOSE"}
{"level":"info","time":"2026-02-01T20:38:51.019Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327226-1h4vut","code":1001,"reason":"SERVER_CLOSE","closeSource":"UNKNOWN","wasClean":true,"event":"websocket_disconnected","msg":"WebSocket disconnected: UNKNOWN"}
{"level":"warn","time":"2026-02-01T20:38:53.926Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327271-a4kjs6","code":1001,"originalReason":"empty","closeSource":"UNKNOWN","event":"ws_close_reason_missing","msg":"[WS] Close(1001) with empty/none reason - logging as SERVER_CLOSE"}
{"level":"info","time":"2026-02-01T20:38:53.926Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978327271-a4kjs6","code":1001,"reason":"SERVER_CLOSE","closeSource":"UNKNOWN","wasClean":true,"event":"websocket_disconnected","msg":"WebSocket disconnected: UNKNOWN"}
{"level":"info","time":"2026-02-01T20:38:55.101Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","traceId":"cfe9b9f1-2ae0-4cc5-9656-89bccfd61e1c","sessionId":"sess_0a6a9323-dfaa-4864-836a-fbffe02d7ec4","hasUserId":false,"ticketHash":"f1ace4ad6fd5","ttl":60,"msg":"[WSTicket] Ticket generated"}
{"level":"info","time":"2026-02-01T20:38:55.125Z","pid":19932,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1769978335124-mkrvkp","ip":"::1","originHost":"localhost","sessionHash":"2c3b20d765e7","hasUserId":false,"event":"ws_conn_ctx_set","msg":"WebSocket connection context established"}
