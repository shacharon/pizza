{"level":"info","time":"2026-02-17T18:59:07.180Z","pid":15388,"hostname":"il-dev-win-lt-shahar-pot","requestId":"req-1771354743515-5h89zzyjo","event":"textsearch_anchor_eval","hasCityText":true,"hasLocationBias":false,"hasUserLocation":false,"allowed":true,"msg":"[ROUTE2] TEXTSEARCH anchor evaluation"}
{"level":"info","time":"2026-02-17T18:59:07.180Z","pid":15388,"hostname":"il-dev-win-lt-shahar-pot","requestId":"req-1771354743515-5h89zzyjo","event":"google_parallel_start_decision","route":"TEXTSEARCH","allowed":true,"reason":"has_city_or_bias","msg":"[ROUTE2] Google parallel start decision"}
{"level":"info","time":"2026-02-17T18:59:07.181Z","pid":15388,"hostname":"il-dev-win-lt-shahar-pot","requestId":"req-1771354743515-5h89zzyjo","pipelineVersion":"route2","event":"parallel_started","msg":"[ROUTE2] Starting parallel tasks (base_filters + post_constraints + intent chain)"}
{"level":"warn","time":"2026-02-17T20:07:00.420Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_client_not_initialized","pid":20536,"stack":"    at <anonymous> (c:\\dev\\piza\\angular-piza\\server\\src\\middleware\\rate-limit.middleware.ts:148:21)\n    at ModuleJob.run (node:internal/modules/esm/module_job:195:25)","msg":"[Redis] getExistingRedisClient called before initialization - caller should use getRedisClient first"}
{"level":"warn","time":"2026-02-17T20:07:00.467Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","rateLimitStore":"memory","msg":"[RateLimit] Using in-memory rate limiting (not distributed)"}
{"level":"info","time":"2026-02-17T20:07:00.586Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[GoogleMapsCache] Attempting Redis connection"}
{"level":"info","time":"2026-02-17T20:07:00.588Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[Redis] Attempting connection to shared client"}
{"level":"info","time":"2026-02-17T20:07:01.367Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","ttlSeconds":300,"cleanupIntervalMs":60000,"msg":"InMemoryRequestStore initialized"}
{"level":"info","time":"2026-02-17T20:07:01.371Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_init_attempt","pid":20536,"redisUrlHost":"redis://localhost:6379","enableRedisJobStore":true,"enableRedisCache":true,"wsRequiresAuth":true,"msg":"[BOOT] Initializing Redis client (required for WS tickets)"}
{"level":"info","time":"2026-02-17T20:07:01.374Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_boot_status","pid":20536,"redisUrlHost":"redis://localhost:6379","redisEnabled":false,"clientCreated":false,"clientConnected":false,"wsRequiresAuth":true,"msg":"[BOOT] Redis status: FAILED"}
{"level":"warn","time":"2026-02-17T20:07:01.377Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_unavailable_ws_auth_disabled","wsRequiresAuth":true,"redisConnected":false,"env":"development","msg":"[BOOT] WARNING: Redis unavailable, WS authentication will be disabled in dev"}
{"level":"info","time":"2026-02-17T20:07:01.380Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","googleApiKey":{"exists":true,"len":39,"last4":"fpMo"},"searchProvider":"google","msg":"[BOOT] API key status"}
{"level":"info","time":"2026-02-17T20:07:01.382Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Config] ASSISTANT_MODE = ENABLED (always on, LLM-first)"}
{"level":"info","time":"2026-02-17T20:07:01.401Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","env":"development","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","credentialsEnabled":true,"msg":"CORS: Initialized"}
{"level":"info","time":"2026-02-17T20:07:01.416Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","env":"config_local","redisEnabled":true,"hasStateStore":true,"msg":"WebSocketManager: Configuration resolved"}
{"level":"info","time":"2026-02-17T20:07:01.420Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","redisUrl":"local","msg":"WebSocketManager: Redis enabled"}
{"level":"info","time":"2026-02-17T20:07:01.423Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","msg":"WebSocketManager: Initialized"}
{"level":"info","time":"2026-02-17T20:07:01.437Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","msg":"Server listening on http://localhost:3000"}
{"level":"info","time":"2026-02-17T20:07:01.538Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Redis] Client ready"}
{"level":"info","time":"2026-02-17T20:07:01.544Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_CONNECTED","redisUrl":"redis://localhost:6379","msg":"[Redis] ✓ Shared client connected successfully"}
{"level":"info","time":"2026-02-17T20:07:01.548Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_SERVICE_READY","hasRedis":true,"commandTimeout":500,"msg":"[GoogleMapsCache] ✓ Cache service active with shared Redis client"}
{"level":"info","time":"2026-02-17T20:07:18.668Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"c36d2f98-504e-4319-a390-d1c17ff78876","event":"bootstrap_cookie_issued","sessionId":"sess_609b9dc9-0ffc-4...","msg":"Bootstrap session cookie issued"}
{"level":"warn","time":"2026-02-17T20:07:18.725Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"a0158e5f-0ccf-41fb-aff8-dcfb0f157913","path":"/ws-ticket","method":"POST","msg":"[Auth] Missing or invalid Authorization header"}
{"level":"warn","time":"2026-02-17T20:07:18.733Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"a0158e5f-0ccf-41fb-aff8-dcfb0f157913","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":10,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:07:18.981Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"b6766fc3-49da-4c43-9924-54a434d0d8c5","path":"/ws-ticket","method":"POST","msg":"[Auth] Missing or invalid Authorization header"}
{"level":"warn","time":"2026-02-17T20:07:18.984Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"b6766fc3-49da-4c43-9924-54a434d0d8c5","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":5,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:07:19.583Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"fc8c4885-c628-41a6-9bef-d6c6566ee452","path":"/ws-ticket","method":"POST","msg":"[Auth] Missing or invalid Authorization header"}
{"level":"warn","time":"2026-02-17T20:07:19.586Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"fc8c4885-c628-41a6-9bef-d6c6566ee452","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":4,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:07:20.750Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"2cd5bd6e-60ba-4d5d-bb43-1930f4c15d3a","path":"/ws-ticket","method":"POST","msg":"[Auth] Missing or invalid Authorization header"}
{"level":"warn","time":"2026-02-17T20:07:20.753Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"2cd5bd6e-60ba-4d5d-bb43-1930f4c15d3a","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":3,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:07:22.330Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"3ad5992f-9856-4a36-8671-a116c9db7af8","path":"/ws-ticket","method":"POST","msg":"[Auth] Missing or invalid Authorization header"}
{"level":"warn","time":"2026-02-17T20:07:22.333Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"3ad5992f-9856-4a36-8671-a116c9db7af8","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":5,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:07:27.253Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"50da6b13-0d7f-4cdc-b5c5-e1f248313c90","path":"/ws-ticket","method":"POST","msg":"[Auth] Missing or invalid Authorization header"}
{"level":"warn","time":"2026-02-17T20:07:27.256Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"50da6b13-0d7f-4cdc-b5c5-e1f248313c90","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":3,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:07:31.434Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"284e260d-588a-4afd-882e-f3b785a66b84","path":"/ws-ticket","method":"POST","msg":"[Auth] Missing or invalid Authorization header"}
{"level":"warn","time":"2026-02-17T20:07:31.439Z","pid":20536,"hostname":"il-dev-win-lt-shahar-pot","traceId":"284e260d-588a-4afd-882e-f3b785a66b84","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":6,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:07:51.529Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_client_not_initialized","pid":27736,"stack":"    at <anonymous> (c:\\dev\\piza\\angular-piza\\server\\src\\middleware\\rate-limit.middleware.ts:148:21)\n    at ModuleJob.run (node:internal/modules/esm/module_job:195:25)","msg":"[Redis] getExistingRedisClient called before initialization - caller should use getRedisClient first"}
{"level":"warn","time":"2026-02-17T20:07:51.545Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","rateLimitStore":"memory","msg":"[RateLimit] Using in-memory rate limiting (not distributed)"}
{"level":"info","time":"2026-02-17T20:07:51.635Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[GoogleMapsCache] Attempting Redis connection"}
{"level":"info","time":"2026-02-17T20:07:51.637Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[Redis] Attempting connection to shared client"}
{"level":"info","time":"2026-02-17T20:07:52.010Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","ttlSeconds":300,"cleanupIntervalMs":60000,"msg":"InMemoryRequestStore initialized"}
{"level":"info","time":"2026-02-17T20:07:52.014Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_init_attempt","pid":27736,"redisUrlHost":"redis://localhost:6379","enableRedisJobStore":true,"enableRedisCache":true,"wsRequiresAuth":true,"msg":"[BOOT] Initializing Redis client (required for WS tickets)"}
{"level":"info","time":"2026-02-17T20:07:52.016Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_boot_status","pid":27736,"redisUrlHost":"redis://localhost:6379","redisEnabled":false,"clientCreated":false,"clientConnected":false,"wsRequiresAuth":true,"msg":"[BOOT] Redis status: FAILED"}
{"level":"warn","time":"2026-02-17T20:07:52.017Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_unavailable_ws_auth_disabled","wsRequiresAuth":true,"redisConnected":false,"env":"development","msg":"[BOOT] WARNING: Redis unavailable, WS authentication will be disabled in dev"}
{"level":"info","time":"2026-02-17T20:07:52.017Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","googleApiKey":{"exists":true,"len":39,"last4":"fpMo"},"searchProvider":"google","msg":"[BOOT] API key status"}
{"level":"info","time":"2026-02-17T20:07:52.019Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Config] ASSISTANT_MODE = ENABLED (always on, LLM-first)"}
{"level":"info","time":"2026-02-17T20:07:52.046Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","env":"development","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","credentialsEnabled":true,"msg":"CORS: Initialized"}
{"level":"info","time":"2026-02-17T20:07:52.056Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","env":"config_local","redisEnabled":true,"hasStateStore":true,"msg":"WebSocketManager: Configuration resolved"}
{"level":"info","time":"2026-02-17T20:07:52.061Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","redisUrl":"local","msg":"WebSocketManager: Redis enabled"}
{"level":"info","time":"2026-02-17T20:07:52.064Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","msg":"WebSocketManager: Initialized"}
{"level":"info","time":"2026-02-17T20:07:52.075Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","msg":"Server listening on http://localhost:3000"}
{"level":"info","time":"2026-02-17T20:07:52.130Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Redis] Client ready"}
{"level":"info","time":"2026-02-17T20:07:52.134Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_CONNECTED","redisUrl":"redis://localhost:6379","msg":"[Redis] ✓ Shared client connected successfully"}
{"level":"info","time":"2026-02-17T20:07:52.136Z","pid":27736,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_SERVICE_READY","hasRedis":true,"commandTimeout":500,"msg":"[GoogleMapsCache] ✓ Cache service active with shared Redis client"}
{"level":"warn","time":"2026-02-17T20:11:19.998Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_client_not_initialized","pid":21200,"stack":"    at <anonymous> (c:\\dev\\piza\\angular-piza\\server\\src\\middleware\\rate-limit.middleware.ts:148:21)\n    at ModuleJob.run (node:internal/modules/esm/module_job:195:25)","msg":"[Redis] getExistingRedisClient called before initialization - caller should use getRedisClient first"}
{"level":"warn","time":"2026-02-17T20:11:20.015Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","rateLimitStore":"memory","msg":"[RateLimit] Using in-memory rate limiting (not distributed)"}
{"level":"info","time":"2026-02-17T20:11:20.075Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[GoogleMapsCache] Attempting Redis connection"}
{"level":"info","time":"2026-02-17T20:11:20.077Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[Redis] Attempting connection to shared client"}
{"level":"info","time":"2026-02-17T20:11:20.391Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","ttlSeconds":300,"cleanupIntervalMs":60000,"msg":"InMemoryRequestStore initialized"}
{"level":"info","time":"2026-02-17T20:11:20.394Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_init_attempt","pid":21200,"redisUrlHost":"redis://localhost:6379","enableRedisJobStore":true,"enableRedisCache":true,"wsRequiresAuth":true,"msg":"[BOOT] Initializing Redis client (required for WS tickets)"}
{"level":"info","time":"2026-02-17T20:11:20.398Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_boot_status","pid":21200,"redisUrlHost":"redis://localhost:6379","redisEnabled":false,"clientCreated":false,"clientConnected":false,"wsRequiresAuth":true,"msg":"[BOOT] Redis status: FAILED"}
{"level":"warn","time":"2026-02-17T20:11:20.399Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_unavailable_ws_auth_disabled","wsRequiresAuth":true,"redisConnected":false,"env":"development","msg":"[BOOT] WARNING: Redis unavailable, WS authentication will be disabled in dev"}
{"level":"info","time":"2026-02-17T20:11:20.400Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","googleApiKey":{"exists":true,"len":39,"last4":"fpMo"},"searchProvider":"google","msg":"[BOOT] API key status"}
{"level":"info","time":"2026-02-17T20:11:20.401Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Config] ASSISTANT_MODE = ENABLED (always on, LLM-first)"}
{"level":"info","time":"2026-02-17T20:11:20.413Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","env":"development","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","credentialsEnabled":true,"msg":"CORS: Initialized"}
{"level":"info","time":"2026-02-17T20:11:20.425Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","env":"config_local","redisEnabled":true,"hasStateStore":true,"msg":"WebSocketManager: Configuration resolved"}
{"level":"info","time":"2026-02-17T20:11:20.428Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","redisUrl":"local","msg":"WebSocketManager: Redis enabled"}
{"level":"info","time":"2026-02-17T20:11:20.432Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","msg":"WebSocketManager: Initialized"}
{"level":"info","time":"2026-02-17T20:11:20.440Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","msg":"Server listening on http://localhost:3000"}
{"level":"info","time":"2026-02-17T20:11:20.482Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Redis] Client ready"}
{"level":"info","time":"2026-02-17T20:11:20.486Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_CONNECTED","redisUrl":"redis://localhost:6379","msg":"[Redis] ✓ Shared client connected successfully"}
{"level":"info","time":"2026-02-17T20:11:20.488Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_SERVICE_READY","hasRedis":true,"commandTimeout":500,"msg":"[GoogleMapsCache] ✓ Cache service active with shared Redis client"}
{"level":"warn","time":"2026-02-17T20:13:26.603Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_client_not_initialized","pid":15720,"stack":"    at <anonymous> (c:\\dev\\piza\\angular-piza\\server\\src\\middleware\\rate-limit.middleware.ts:148:21)\n    at ModuleJob.run (node:internal/modules/esm/module_job:195:25)","msg":"[Redis] getExistingRedisClient called before initialization - caller should use getRedisClient first"}
{"level":"warn","time":"2026-02-17T20:13:26.630Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","rateLimitStore":"memory","msg":"[RateLimit] Using in-memory rate limiting (not distributed)"}
{"level":"info","time":"2026-02-17T20:13:26.780Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[GoogleMapsCache] Attempting Redis connection"}
{"level":"info","time":"2026-02-17T20:13:26.783Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[Redis] Attempting connection to shared client"}
{"level":"info","time":"2026-02-17T20:13:27.614Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","ttlSeconds":300,"cleanupIntervalMs":60000,"msg":"InMemoryRequestStore initialized"}
{"level":"info","time":"2026-02-17T20:13:27.636Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_init_attempt","pid":15720,"redisUrlHost":"redis://localhost:6379","enableRedisJobStore":true,"enableRedisCache":true,"wsRequiresAuth":true,"msg":"[BOOT] Initializing Redis client (required for WS tickets)"}
{"level":"info","time":"2026-02-17T20:13:27.640Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_boot_status","pid":15720,"redisUrlHost":"redis://localhost:6379","redisEnabled":false,"clientCreated":false,"clientConnected":false,"wsRequiresAuth":true,"msg":"[BOOT] Redis status: FAILED"}
{"level":"warn","time":"2026-02-17T20:13:27.646Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_unavailable_ws_auth_disabled","wsRequiresAuth":true,"redisConnected":false,"env":"development","msg":"[BOOT] WARNING: Redis unavailable, WS authentication will be disabled in dev"}
{"level":"info","time":"2026-02-17T20:13:27.648Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","googleApiKey":{"exists":true,"len":39,"last4":"fpMo"},"searchProvider":"google","msg":"[BOOT] API key status"}
{"level":"info","time":"2026-02-17T20:13:27.649Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Config] ASSISTANT_MODE = ENABLED (always on, LLM-first)"}
{"level":"info","time":"2026-02-17T20:13:27.670Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","env":"development","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","credentialsEnabled":true,"msg":"CORS: Initialized"}
{"level":"info","time":"2026-02-17T20:13:27.698Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","env":"config_local","redisEnabled":true,"hasStateStore":true,"msg":"WebSocketManager: Configuration resolved"}
{"level":"info","time":"2026-02-17T20:13:27.701Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","redisUrl":"local","msg":"WebSocketManager: Redis enabled"}
{"level":"info","time":"2026-02-17T20:13:27.706Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","msg":"WebSocketManager: Initialized"}
{"level":"info","time":"2026-02-17T20:13:27.718Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","msg":"Server listening on http://localhost:3000"}
{"level":"fatal","time":"2026-02-17T20:13:27.747Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","error":"listen EADDRINUSE: address already in use :::3000","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at __node_internal_captureLargerStackTrace (node:internal/errors:496:5)\n    at __node_internal_uvExceptionWithHostPort (node:internal/errors:593:12)\n    at Server.setupListenHandle [as _listen2] (node:net:1817:16)\n    at listenInCluster (node:net:1865:12)\n    at Server.listen (node:net:1953:7)\n    at Function.listen (C:\\dev\\piza\\angular-piza\\server\\node_modules\\express\\lib\\application.js:605:24)\n    at <anonymous> (c:\\dev\\piza\\angular-piza\\server\\src\\server.ts:203:20)","msg":"[FATAL] Uncaught Exception - server may be in unstable state"}
{"level":"info","time":"2026-02-17T20:13:27.930Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Redis] Client ready"}
{"level":"info","time":"2026-02-17T20:13:27.936Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_CONNECTED","redisUrl":"redis://localhost:6379","msg":"[Redis] ✓ Shared client connected successfully"}
{"level":"info","time":"2026-02-17T20:13:27.939Z","pid":15720,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_SERVICE_READY","hasRedis":true,"commandTimeout":500,"msg":"[GoogleMapsCache] ✓ Cache service active with shared Redis client"}
{"level":"info","time":"2026-02-17T20:13:55.093Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"9212d651-d30f-4b3f-ac1a-6ebb21dafe7f","event":"bootstrap_cookie_issued","sessionId":"sess_1625f769-3188-4...","msg":"Bootstrap session cookie issued"}
{"level":"warn","time":"2026-02-17T20:13:55.224Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"e66f9a23-f0bd-4ac9-9846-8fb668860c1a","path":"/ws-ticket","method":"POST","hadCookie":true,"event":"auth_failed_no_credentials","msg":"[Auth] No valid session cookie or Bearer token"}
{"level":"warn","time":"2026-02-17T20:13:55.230Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"e66f9a23-f0bd-4ac9-9846-8fb668860c1a","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":15,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:13:55.553Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"04523db4-c5d0-4a8c-882b-2a8e3eb422a4","path":"/ws-ticket","method":"POST","hadCookie":true,"event":"auth_failed_no_credentials","msg":"[Auth] No valid session cookie or Bearer token"}
{"level":"warn","time":"2026-02-17T20:13:55.561Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"04523db4-c5d0-4a8c-882b-2a8e3eb422a4","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":11,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:13:56.133Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"a9b14e94-6638-40d1-ba42-244851c352e1","path":"/ws-ticket","method":"POST","hadCookie":true,"event":"auth_failed_no_credentials","msg":"[Auth] No valid session cookie or Bearer token"}
{"level":"warn","time":"2026-02-17T20:13:56.135Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"a9b14e94-6638-40d1-ba42-244851c352e1","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":3,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:13:57.093Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"9738e85e-7546-44b2-9b8b-ca555efb1872","path":"/ws-ticket","method":"POST","hadCookie":true,"event":"auth_failed_no_credentials","msg":"[Auth] No valid session cookie or Bearer token"}
{"level":"warn","time":"2026-02-17T20:13:57.095Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"9738e85e-7546-44b2-9b8b-ca555efb1872","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":3,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:13:59.147Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"179f9d0b-6d90-4281-b18c-84d93262aa26","path":"/ws-ticket","method":"POST","hadCookie":true,"event":"auth_failed_no_credentials","msg":"[Auth] No valid session cookie or Bearer token"}
{"level":"warn","time":"2026-02-17T20:13:59.151Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"179f9d0b-6d90-4281-b18c-84d93262aa26","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":4,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:14:12.810Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"862b11b9-5a10-4c77-80dc-cedb34596659","path":"/ws-ticket","method":"POST","hadCookie":true,"event":"auth_failed_no_credentials","msg":"[Auth] No valid session cookie or Bearer token"}
{"level":"warn","time":"2026-02-17T20:14:12.812Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"862b11b9-5a10-4c77-80dc-cedb34596659","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":3,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:14:24.577Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"b814c18d-382d-4084-86c9-86eabf99ea77","path":"/ws-ticket","method":"POST","hadCookie":true,"event":"auth_failed_no_credentials","msg":"[Auth] No valid session cookie or Bearer token"}
{"level":"warn","time":"2026-02-17T20:14:24.580Z","pid":21200,"hostname":"il-dev-win-lt-shahar-pot","traceId":"b814c18d-382d-4084-86c9-86eabf99ea77","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":4,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:14:51.015Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_client_not_initialized","pid":23404,"stack":"    at <anonymous> (c:\\dev\\piza\\angular-piza\\server\\src\\middleware\\rate-limit.middleware.ts:148:21)\n    at ModuleJob.run (node:internal/modules/esm/module_job:195:25)","msg":"[Redis] getExistingRedisClient called before initialization - caller should use getRedisClient first"}
{"level":"warn","time":"2026-02-17T20:14:51.032Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","rateLimitStore":"memory","msg":"[RateLimit] Using in-memory rate limiting (not distributed)"}
{"level":"info","time":"2026-02-17T20:14:51.095Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[GoogleMapsCache] Attempting Redis connection"}
{"level":"info","time":"2026-02-17T20:14:51.097Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[Redis] Attempting connection to shared client"}
{"level":"info","time":"2026-02-17T20:14:51.434Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","ttlSeconds":300,"cleanupIntervalMs":60000,"msg":"InMemoryRequestStore initialized"}
{"level":"info","time":"2026-02-17T20:14:51.436Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_init_attempt","pid":23404,"redisUrlHost":"redis://localhost:6379","enableRedisJobStore":true,"enableRedisCache":true,"wsRequiresAuth":true,"msg":"[BOOT] Initializing Redis client (required for WS tickets)"}
{"level":"info","time":"2026-02-17T20:14:51.437Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_boot_status","pid":23404,"redisUrlHost":"redis://localhost:6379","redisEnabled":false,"clientCreated":false,"clientConnected":false,"wsRequiresAuth":true,"msg":"[BOOT] Redis status: FAILED"}
{"level":"warn","time":"2026-02-17T20:14:51.438Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_unavailable_ws_auth_disabled","wsRequiresAuth":true,"redisConnected":false,"env":"development","msg":"[BOOT] WARNING: Redis unavailable, WS authentication will be disabled in dev"}
{"level":"info","time":"2026-02-17T20:14:51.439Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","googleApiKey":{"exists":true,"len":39,"last4":"fpMo"},"searchProvider":"google","msg":"[BOOT] API key status"}
{"level":"info","time":"2026-02-17T20:14:51.440Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Config] ASSISTANT_MODE = ENABLED (always on, LLM-first)"}
{"level":"info","time":"2026-02-17T20:14:51.452Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","env":"development","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","credentialsEnabled":true,"msg":"CORS: Initialized"}
{"level":"info","time":"2026-02-17T20:14:51.464Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","env":"config_local","redisEnabled":true,"hasStateStore":true,"msg":"WebSocketManager: Configuration resolved"}
{"level":"info","time":"2026-02-17T20:14:51.466Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","redisUrl":"local","msg":"WebSocketManager: Redis enabled"}
{"level":"info","time":"2026-02-17T20:14:51.468Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","msg":"WebSocketManager: Initialized"}
{"level":"info","time":"2026-02-17T20:14:51.474Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","msg":"Server listening on http://localhost:3000"}
{"level":"info","time":"2026-02-17T20:14:51.530Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Redis] Client ready"}
{"level":"info","time":"2026-02-17T20:14:51.534Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_CONNECTED","redisUrl":"redis://localhost:6379","msg":"[Redis] ✓ Shared client connected successfully"}
{"level":"info","time":"2026-02-17T20:14:51.536Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_SERVICE_READY","hasRedis":true,"commandTimeout":500,"msg":"[GoogleMapsCache] ✓ Cache service active with shared Redis client"}
{"level":"info","time":"2026-02-17T20:14:51.732Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","traceId":"2bd03570-0dc5-4bdc-9c89-3bc1bdcb84c1","event":"bootstrap_cookie_issued","sessionId":"sess_0262b522-915d-4...","msg":"Bootstrap session cookie issued"}
{"level":"warn","time":"2026-02-17T20:14:52.215Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","traceId":"e71ad6cd-80ac-4da8-be1c-77ab7f15b60b","path":"/ws-ticket","method":"POST","hadCookie":true,"event":"auth_failed_no_credentials","msg":"[Auth] No valid session cookie or Bearer token"}
{"level":"warn","time":"2026-02-17T20:14:52.219Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","traceId":"e71ad6cd-80ac-4da8-be1c-77ab7f15b60b","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":8,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:15:19.797Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","traceId":"eb0ae6de-fb5b-4d9b-8e2f-60aec2881818","path":"/ws-ticket","method":"POST","hadCookie":true,"event":"auth_failed_no_credentials","msg":"[Auth] No valid session cookie or Bearer token"}
{"level":"warn","time":"2026-02-17T20:15:19.803Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","traceId":"eb0ae6de-fb5b-4d9b-8e2f-60aec2881818","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":8,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:15:25.170Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","traceId":"0ed4b2ba-0bff-4345-9bf6-b28b2581a4bf","path":"/ws-ticket","method":"POST","hadCookie":true,"event":"auth_failed_no_credentials","msg":"[Auth] No valid session cookie or Bearer token"}
{"level":"warn","time":"2026-02-17T20:15:25.172Z","pid":23404,"hostname":"il-dev-win-lt-shahar-pot","traceId":"0ed4b2ba-0bff-4345-9bf6-b28b2581a4bf","method":"POST","path":"/ws-ticket","statusCode":401,"durationMs":2,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:16:10.297Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_client_not_initialized","pid":15204,"stack":"    at <anonymous> (c:\\dev\\piza\\angular-piza\\server\\src\\middleware\\rate-limit.middleware.ts:148:21)\n    at ModuleJob.run (node:internal/modules/esm/module_job:195:25)","msg":"[Redis] getExistingRedisClient called before initialization - caller should use getRedisClient first"}
{"level":"warn","time":"2026-02-17T20:16:10.315Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","rateLimitStore":"memory","msg":"[RateLimit] Using in-memory rate limiting (not distributed)"}
{"level":"info","time":"2026-02-17T20:16:10.374Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[GoogleMapsCache] Attempting Redis connection"}
{"level":"info","time":"2026-02-17T20:16:10.375Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[Redis] Attempting connection to shared client"}
{"level":"info","time":"2026-02-17T20:16:10.606Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","ttlSeconds":300,"cleanupIntervalMs":60000,"msg":"InMemoryRequestStore initialized"}
{"level":"info","time":"2026-02-17T20:16:10.608Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_init_attempt","pid":15204,"redisUrlHost":"redis://localhost:6379","enableRedisJobStore":true,"enableRedisCache":true,"wsRequiresAuth":true,"msg":"[BOOT] Initializing Redis client (required for WS tickets)"}
{"level":"info","time":"2026-02-17T20:16:10.610Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_boot_status","pid":15204,"redisUrlHost":"redis://localhost:6379","redisEnabled":false,"clientCreated":false,"clientConnected":false,"wsRequiresAuth":true,"msg":"[BOOT] Redis status: FAILED"}
{"level":"warn","time":"2026-02-17T20:16:10.611Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_unavailable_ws_auth_disabled","wsRequiresAuth":true,"redisConnected":false,"env":"development","msg":"[BOOT] WARNING: Redis unavailable, WS authentication will be disabled in dev"}
{"level":"info","time":"2026-02-17T20:16:10.612Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","googleApiKey":{"exists":true,"len":39,"last4":"fpMo"},"searchProvider":"google","msg":"[BOOT] API key status"}
{"level":"info","time":"2026-02-17T20:16:10.613Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Config] ASSISTANT_MODE = ENABLED (always on, LLM-first)"}
{"level":"info","time":"2026-02-17T20:16:10.622Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","env":"development","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","credentialsEnabled":true,"msg":"CORS: Initialized"}
{"level":"info","time":"2026-02-17T20:16:10.629Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","env":"config_local","redisEnabled":true,"hasStateStore":true,"msg":"WebSocketManager: Configuration resolved"}
{"level":"info","time":"2026-02-17T20:16:10.631Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","redisUrl":"local","msg":"WebSocketManager: Redis enabled"}
{"level":"info","time":"2026-02-17T20:16:10.633Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","msg":"WebSocketManager: Initialized"}
{"level":"info","time":"2026-02-17T20:16:10.638Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","msg":"Server listening on http://localhost:3000"}
{"level":"info","time":"2026-02-17T20:16:10.670Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Redis] Client ready"}
{"level":"info","time":"2026-02-17T20:16:10.673Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_CONNECTED","redisUrl":"redis://localhost:6379","msg":"[Redis] ✓ Shared client connected successfully"}
{"level":"info","time":"2026-02-17T20:16:10.674Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_SERVICE_READY","hasRedis":true,"commandTimeout":500,"msg":"[GoogleMapsCache] ✓ Cache service active with shared Redis client"}
{"level":"error","time":"2026-02-17T20:16:19.960Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"e1ce4252-4ca3-4ed3-92e4-bce5d6dd7562","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:16:19.990Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"00d2fd83-ebc8-42d9-b60d-8e8583c2eb15","method":"POST","path":"/","statusCode":500,"durationMs":90,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:16:20.276Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"f8a5e293-8585-47ed-ac2a-1bab445f67a3","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:16:20.279Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"3b8edd8a-3a5b-411c-9084-cef2bc846911","method":"POST","path":"/","statusCode":500,"durationMs":10,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:16:20.836Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"e54c8744-1678-43d7-8c04-27609683251a","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:16:20.837Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"edc47754-f998-4315-888c-0ccd10bf867f","method":"POST","path":"/","statusCode":500,"durationMs":5,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:16:22.114Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"695cfda3-fcb2-45e0-848c-b29538c5cf85","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:16:22.117Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"d9af3b70-cff3-4be4-8110-57bdefdfbc7d","method":"POST","path":"/","statusCode":500,"durationMs":7,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:16:24.108Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"6e4ec690-f7b0-4d24-821f-02447eef3cf9","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:16:24.109Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"4a40ae9f-91c7-48c4-a30d-cd2610f83c0b","method":"POST","path":"/","statusCode":500,"durationMs":3,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:16:28.160Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"cad2d49f-86d3-43db-a949-e7be5603778b","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:16:28.164Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"f717aa76-13d1-4ec4-9246-ed411ad4f9c3","method":"POST","path":"/","statusCode":500,"durationMs":5,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:16:35.351Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"0f3bef37-1d6f-4cbf-9e9b-78908951312b","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:16:35.355Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"b0b83ce7-c897-40d8-a29d-77e1ab072f50","method":"POST","path":"/","statusCode":500,"durationMs":11,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:16:41.154Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"9e146f92-8d05-4570-a7f4-908df6f86a45","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:16:41.154Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"44eae28f-1071-4710-a895-81d08dc73b0f","method":"POST","path":"/","statusCode":500,"durationMs":2,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:16:45.154Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"37bed7e6-26da-457f-a8fe-a55f1004e5ac","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:16:45.155Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"f50c3869-df44-4d76-ae49-6bcac99b3da2","method":"POST","path":"/","statusCode":500,"durationMs":2,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:16:52.182Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"6a036ffc-725f-45ca-b243-981ca0b478df","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:16:52.184Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"d0b77ef9-c986-4a0f-a37a-bc056d2e733f","method":"POST","path":"/","statusCode":500,"durationMs":8,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:16:57.157Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"8abfd81a-f383-449e-878b-adbcdce14790","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:16:57.159Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"1ed64b56-481b-4e5e-a27e-3883bd8a41f2","method":"POST","path":"/","statusCode":500,"durationMs":6,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:17:07.612Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"84294d91-ee75-457d-b5ad-a6620d81f3ef","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:17:07.617Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"2ef71c4e-ea17-4544-bd97-2a2d1c8f864d","method":"POST","path":"/","statusCode":500,"durationMs":11,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:17:08.046Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"8df63a29-121d-4736-ba6f-4151d765e46b","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:17:08.050Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"0f7e1d46-d58d-4829-b635-9529b5232845","method":"POST","path":"/","statusCode":500,"durationMs":10,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:17:08.604Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"a1838254-0872-4a2a-bff7-a396610167cd","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:17:08.606Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"410c922e-11ac-4d7e-80a1-931984cf87a2","method":"POST","path":"/","statusCode":500,"durationMs":4,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:17:09.774Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"b8c0f221-1c27-4a61-9e83-306d77dbd545","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:17:09.776Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"b8f4d286-a519-42db-be9c-10e78381e2ce","method":"POST","path":"/","statusCode":500,"durationMs":3,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:17:13.152Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"d3b55406-07d7-430b-908c-1c75687d104d","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:17:13.154Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"13b2fbf2-2389-44fa-b188-a20ed62dae06","method":"POST","path":"/","statusCode":500,"durationMs":3,"msg":"HTTP response"}
{"level":"error","time":"2026-02-17T20:17:17.551Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"570d4de7-31af-4189-8c05-ecbdc62ee6c1","event":"bootstrap_failed","error":{},"msg":"Failed to issue bootstrap cookie"}
{"level":"error","time":"2026-02-17T20:17:17.554Z","pid":15204,"hostname":"il-dev-win-lt-shahar-pot","traceId":"00b92b2d-24a8-46c0-9723-feaa64a34ab4","method":"POST","path":"/","statusCode":500,"durationMs":8,"msg":"HTTP response"}
{"level":"warn","time":"2026-02-17T20:17:32.184Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_client_not_initialized","pid":23772,"stack":"    at <anonymous> (c:\\dev\\piza\\angular-piza\\server\\src\\middleware\\rate-limit.middleware.ts:148:21)\n    at ModuleJob.run (node:internal/modules/esm/module_job:195:25)","msg":"[Redis] getExistingRedisClient called before initialization - caller should use getRedisClient first"}
{"level":"warn","time":"2026-02-17T20:17:32.206Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","rateLimitStore":"memory","msg":"[RateLimit] Using in-memory rate limiting (not distributed)"}
{"level":"info","time":"2026-02-17T20:17:32.416Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[GoogleMapsCache] Attempting Redis connection"}
{"level":"info","time":"2026-02-17T20:17:32.419Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_INIT_ATTEMPT","redisUrl":"redis://localhost:6379","msg":"[Redis] Attempting connection to shared client"}
{"level":"info","time":"2026-02-17T20:17:33.048Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","ttlSeconds":300,"cleanupIntervalMs":60000,"msg":"InMemoryRequestStore initialized"}
{"level":"info","time":"2026-02-17T20:17:33.053Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_init_attempt","pid":23772,"redisUrlHost":"redis://localhost:6379","enableRedisJobStore":true,"enableRedisCache":true,"wsRequiresAuth":true,"msg":"[BOOT] Initializing Redis client (required for WS tickets)"}
{"level":"info","time":"2026-02-17T20:17:33.056Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_boot_status","pid":23772,"redisUrlHost":"redis://localhost:6379","redisEnabled":false,"clientCreated":false,"clientConnected":false,"wsRequiresAuth":true,"msg":"[BOOT] Redis status: FAILED"}
{"level":"warn","time":"2026-02-17T20:17:33.059Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","event":"redis_unavailable_ws_auth_disabled","wsRequiresAuth":true,"redisConnected":false,"env":"development","msg":"[BOOT] WARNING: Redis unavailable, WS authentication will be disabled in dev"}
{"level":"info","time":"2026-02-17T20:17:33.062Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","googleApiKey":{"exists":true,"len":39,"last4":"fpMo"},"searchProvider":"google","msg":"[BOOT] API key status"}
{"level":"info","time":"2026-02-17T20:17:33.065Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Config] ASSISTANT_MODE = ENABLED (always on, LLM-first)"}
{"level":"info","time":"2026-02-17T20:17:33.086Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","env":"development","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","credentialsEnabled":true,"msg":"CORS: Initialized"}
{"level":"info","time":"2026-02-17T20:17:33.115Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","originsCount":3,"originsSummary":"http://localhost:4200, https://www.going2eat.food, https://app.going2eat.food","env":"config_local","redisEnabled":true,"hasStateStore":true,"msg":"WebSocketManager: Configuration resolved"}
{"level":"info","time":"2026-02-17T20:17:33.120Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","redisUrl":"local","msg":"WebSocketManager: Redis enabled"}
{"level":"info","time":"2026-02-17T20:17:33.130Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","path":"/ws","msg":"WebSocketManager: Initialized"}
{"level":"info","time":"2026-02-17T20:17:33.150Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","msg":"Server listening on http://localhost:3000"}
{"level":"info","time":"2026-02-17T20:17:33.233Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","msg":"[Redis] Client ready"}
{"level":"info","time":"2026-02-17T20:17:33.236Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","event":"REDIS_CONNECTED","redisUrl":"redis://localhost:6379","msg":"[Redis] ✓ Shared client connected successfully"}
{"level":"info","time":"2026-02-17T20:17:33.239Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","event":"CACHE_SERVICE_READY","hasRedis":true,"commandTimeout":500,"msg":"[GoogleMapsCache] ✓ Cache service active with shared Redis client"}
{"level":"info","time":"2026-02-17T20:17:39.237Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","traceId":"942e16e2-678b-4d0e-ada4-338cf61c111a","event":"bootstrap_cookie_issued","sessionId":"sess_e9256c4e-8794-4...","msg":"Bootstrap session cookie issued"}
{"level":"info","time":"2026-02-17T20:17:39.317Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","traceId":"9d5309db-29b3-4b2f-958b-8fda224fb14c","sessionId":"sess_e9256c4e-8794-4c57-97a8-de01286af1f2","hasUserId":false,"ticketHash":"12fa697aeee5","ttl":60,"msg":"[WSTicket] Ticket generated"}
{"level":"warn","time":"2026-02-17T20:17:39.355Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","ip":"::1","msg":"WS: Authentication disabled via WS_REQUIRE_AUTH=false"}
{"level":"info","time":"2026-02-17T20:17:39.360Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1771359459358-w9qq55","ip":"::1","originHost":"localhost","sessionHash":"anonymous","authMode":"none","hasUserId":false,"WS_REQUIRE_AUTH":false,"event":"ws_conn_ctx_set","msg":"WebSocket connection context established"}
{"level":"info","time":"2026-02-17T20:18:42.062Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1771359459358-w9qq55","code":1001,"reason":"none","wasClean":true,"msg":"websocket_disconnected"}
{"level":"info","time":"2026-02-17T20:18:42.973Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","traceId":"b5d5a806-35db-4b01-924b-7703eff94cb8","event":"bootstrap_cookie_issued","sessionId":"sess_2a807ef0-9dd5-4...","msg":"Bootstrap session cookie issued"}
{"level":"info","time":"2026-02-17T20:18:43.020Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","traceId":"fdd86b79-8933-4e1a-927f-aa50adbcd155","sessionId":"sess_2a807ef0-9dd5-41f0-ba59-ec6e29aab2dd","hasUserId":false,"ticketHash":"d436ebd6dcc5","ttl":60,"msg":"[WSTicket] Ticket generated"}
{"level":"warn","time":"2026-02-17T20:18:43.051Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","ip":"::1","msg":"WS: Authentication disabled via WS_REQUIRE_AUTH=false"}
{"level":"info","time":"2026-02-17T20:18:43.053Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","clientId":"ws-1771359523053-013yh2","ip":"::1","originHost":"localhost","sessionHash":"anonymous","authMode":"none","hasUserId":false,"WS_REQUIRE_AUTH":false,"event":"ws_conn_ctx_set","msg":"WebSocket connection context established"}
{"level":"warn","time":"2026-02-17T20:19:12.487Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","traceId":"d19479b3-67b7-4b64-be5b-52a0bb9b3451","path":"/","method":"POST","msg":"[Auth] Missing or invalid Authorization header"}
{"level":"warn","time":"2026-02-17T20:19:12.489Z","pid":23772,"hostname":"il-dev-win-lt-shahar-pot","traceId":"d19479b3-67b7-4b64-be5b-52a0bb9b3451","method":"POST","path":"/","statusCode":401,"durationMs":3,"msg":"HTTP response"}
