{
  "info": {
    "name": "Dialogue Context & Error Handling Tests",
    "description": "Tests for empty query fallback, error handling, and context awareness",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Test 1: Initial Search (Pizza in Ashkelon)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-session-id",
            "value": "test-session-context-001"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"text\": \"אני מחפש פיצה באשקלון\",\n  \"userLocation\": null,\n  \"browserLanguage\": \"he-IL\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/dialogue",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "dialogue"]
        }
      },
      "response": []
    },
    {
      "name": "Test 2: Refinement Query (What's Open Now)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-session-id",
            "value": "test-session-context-001",
            "description": "SAME session as Test 1 to preserve context"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"text\": \"מה פתוח עכשיו?\",\n  \"userLocation\": null,\n  \"browserLanguage\": \"he-IL\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/dialogue",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "dialogue"]
        }
      },
      "response": []
    },
    {
      "name": "Test 3: Empty Query Fallback (Which Has Parking)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-session-id",
            "value": "test-session-context-001"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"text\": \"איזה מהם עם חניה?\",\n  \"userLocation\": null,\n  \"browserLanguage\": \"he-IL\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/dialogue",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "dialogue"]
        }
      },
      "response": []
    },
    {
      "name": "Test 4: New Search (Burger in Tel Aviv)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-session-id",
            "value": "test-session-context-002",
            "description": "NEW session to test fresh context"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"text\": \"burger in tel aviv\",\n  \"userLocation\": null,\n  \"browserLanguage\": \"en-US\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/dialogue",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "dialogue"]
        }
      },
      "response": []
    },
    {
      "name": "Test 5: Refinement in English (Open Now)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-session-id",
            "value": "test-session-context-002"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"text\": \"what's open now?\",\n  \"userLocation\": null,\n  \"browserLanguage\": \"en-US\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/dialogue",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "dialogue"]
        }
      },
      "response": []
    },
    {
      "name": "Test 6: Context Switch (Sushi in Haifa)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-session-id",
            "value": "test-session-context-002"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"text\": \"actually, show me sushi in haifa\",\n  \"userLocation\": null,\n  \"browserLanguage\": \"en-US\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/dialogue",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "dialogue"]
        }
      },
      "response": []
    },
    {
      "name": "Test 7: Pizza in Gedera (Baseline)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-session-id",
            "value": "test-session-gedera-001"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"text\": \"i want pizza in gedera\",\n  \"userLocation\": null,\n  \"browserLanguage\": \"en-US\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/dialogue",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "dialogue"]
        }
      },
      "response": []
    }
  ]
}


