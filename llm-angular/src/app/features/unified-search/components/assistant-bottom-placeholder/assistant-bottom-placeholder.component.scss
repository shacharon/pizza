/**
 * Assistant Bottom Placeholder Styles
 * Subtle subtitle-style messages at bottom (always reserves space)
 */

.bottom-placeholder {
  // CRITICAL: Always visible, reserves layout space (no mount/unmount jumps)
  position: sticky;
  bottom: 0;
  left: 0;
  right: 0;

  // Height: min for empty state; allow growth for 3–6 line assistant messages
  min-height: 44px;
  max-height: 160px;

  // Subtle styling (light, near-white - NOT dark cinema bar)
  background: rgba(249, 250, 251, 0.98); // Very light gray, near-white
  border-top: 1px solid rgba(229, 231, 235, 0.8); // Soft border
  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.05); // Minimal shadow

  // Padding
  padding: 10px 16px;

  // Typography (readable contrast)
  color: #374151; // Dark gray text
  font-size: 13px;
  line-height: 1.4;

  // Flex layout
  display: flex;
  align-items: center;
  justify-content: center;

  // Z-index (above content, below modals)
  z-index: 10;

  // Smooth transitions
  transition: opacity 0.3s ease, background-color 0.2s ease;

  // Empty state: fade out text but keep strip visible
  &:not(.has-content) {
    .message-container {
      opacity: 0;
      pointer-events: none;
    }
  }

  // Active state: full opacity
  &.has-content {
    .message-container {
      opacity: 1;
    }
  }

  // RTL support
  &.rtl {
    direction: rtl;
    text-align: right;
  }
}

.message-container {
  width: 100%;
  max-width: 800px;

  // Animation: fade + slide up
  animation: slideUpFade 0.4s ease-out;

  // Overflow handling
  overflow: hidden;

  // Smooth transition for opacity changes
  transition: opacity 0.3s ease;

  // Type-specific styling (subtle colors for light background)
  &.message-summary {
    .message-text {
      color: #1f2937; // Dark gray for summary
      font-weight: 500;
    }
  }

  &.message-clarify {
    .message-text {
      color: #b45309; // Amber/orange for questions
      font-weight: 500;
    }
  }

  &.message-gate_fail {
    .message-text {
      color: #dc2626; // Red for errors
      font-weight: 500;
    }
  }
}

.message-text {
  margin: 0;
  padding: 0;

  // Allow full assistant message (3–6 lines); preserve newlines from backend
  white-space: pre-line;
  overflow-wrap: break-word;

  // Smooth text rendering
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.message-empty {
  // Always present but invisible (maintains height)
  min-height: 20px;
  opacity: 0;
}

// Animation: Slide up + fade in
@keyframes slideUpFade {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// Responsive: Mobile optimization
@media (max-width: 768px) {
  .bottom-placeholder {
    padding: 8px 12px;
    font-size: 12px;
    min-height: 40px;
  }
}

// Accessibility: Reduced motion
@media (prefers-reduced-motion: reduce) {
  .message-container {
    animation: none;
  }

  .bottom-placeholder {
    transition: none;
  }
}