<div class="food-grid-page">
    <header class="search-header">
        <h1>Find Your Next Favorite Meal</h1>
        <div class="search-bar">
            <input type="text" placeholder="Search for pizza, sushi, burgers..." [value]="searchQuery()"
                (input)="onSearch($event)">
            <button (click)="onSearchClick()">Search</button>
            @if (!userLocation()) { <button class="use-location" (click)="onUseMyLocation()">Use my location</button> }
            <label class="distance-toggle inline">
                <input type="checkbox" [checked]="showDistances()" (change)="onDistanceToggle($event)">
                <span class="checkmark"></span>
                Show distances from my location
            </label>
        </div>

        <div class="search-options"></div>
    </header>

    <main class="results-container">
        <!-- LLM follow-up suggestion -->
        @if (!errorMessage() && !isLoading() && llmSuggestion) {
        <div class="clarification-message">
            <p>{{ llmSuggestion }}</p>
        </div>
        }
        <!-- Error message -->
        @if (errorMessage()) {
        <div class="error-message">
            <p>{{ errorMessage() }}</p>
        </div>
        }

        <!-- Clarification message -->
        @if (clarificationMessage()) {
        <div class="clarification-message">
            <p>{{ clarificationMessage() }}</p>
        </div>
        }

        <!-- Results grid -->
        <app-food-grid-results [searchQuery]="searchQuery()" [isLoading]="isLoading()" [restaurants]="restaurants()"
            [userLocation]="userLocation()" [showDistances]="showDistances()">
        </app-food-grid-results>
    </main>
</div>